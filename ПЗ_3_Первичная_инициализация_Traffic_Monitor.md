
4. Первичная инициализация Traffic Monitor
1.	Для того чтобы перейти в TM можно ввести в строку IP-адрес машины, на которую он установлен (centOS
2.	После того как перешел в ТМ и залогинился (officer:xxXX1234), загрузить лицензию (ещё->лицензии)

![image](https://user-images.githubusercontent.com/83372679/211777823-8f59f85d-69bd-4302-a1f3-509751946c82.png)
3.	Войти в TM выполнить LDAP-синхронизацию, ввести IP-сервера, и LDAP-запрос, который был при создании пользователя (то что выделено красным в прошлом пункте).

![image](https://user-images.githubusercontent.com/83372679/211777860-307b4957-2d55-40b1-80c1-cfedf7340280.png)
4.	Проверить соединение (demo\Administrator:xxXX1234), сохранить и после нажать на 4 полосочки и запустить синхронизацию

![image](https://user-images.githubusercontent.com/83372679/211777894-d33b1a59-947a-4b2f-92f6-d7c50d327033.png)

![image](https://user-images.githubusercontent.com/83372679/211777906-f7a40c85-846e-4e9e-846e-1cda306a945a.png)
Результат синхронизации
5. Установка Device Monitor 
Обязательно установить Deploy Agent на клиентские и админские компы где будет DM, т.к. для него в брандмауэре прописаны политики, что проблем с тем что что-то не доходит из-за закрытых портов быть не должно.
Вариант 1 – БД и консоль управления на одном пк
1.	Установить InfoWatch, выбрать БД PostgreSQL

![image](https://user-images.githubusercontent.com/83372679/211777966-46399968-9a5a-487d-b923-4bcf155340d9.png)
2.	 Сервер БД localhost – ссылаемся на то что postgres установлен на этой же машине, порт указывается по дефолту в postgres (5432) ,имя бд любое, имя пользователя postgres, пароль тот что задавали при установке postgres.

![image](https://user-images.githubusercontent.com/83372679/211777989-f56ac0a7-24b6-46ed-ab82-30ababbe1ad9.png)
3.	Задать учетку админа, под которой можно будет зайти в DM

![image](https://user-images.githubusercontent.com/83372679/211778020-b159f6d7-de52-4971-a8f6-264cb54f9fe3.png)
Токен – скопировать из traffic monitor токен по пути ещё -> плагины -> device monitor ->  токены 
![image](https://user-images.githubusercontent.com/83372679/211778044-9e458f40-f66a-437e-909c-738610567f8d.png)
Где копировать токен
Адрес сервера TM – Ip-адрес машины на centOS

![image](https://user-images.githubusercontent.com/83372679/211778098-0151b934-41e6-4dee-88c6-408165e0080c.png)
4.	Запустить device monitor 
Адрес: localhost
Логин и пароль администратора сервера, которые были заданы при установке 

![image](https://user-images.githubusercontent.com/83372679/211778130-1467b64a-c898-4e3d-9ed6-cf3bc5e07deb.png)
Вариант 2 – БД и консоль управления на разных пк
Для этого варианта нужно создать третью ВМ на windows – Database и произвести те же действия из пунктов 2 и 3 с созданием ещё одного пользователя и его добавление в сеть домена.  
В этом пункте также подключаемся по доменному имени (можно и по IP), для этого может понадобиться открыть порт 5432 в брандмауэре для TCP и UDP. 
!! Надо установить прежде Deploy Agent с диска где DM !! 
1.	Выбрать установку только серверной части, выбрать PostgreSQL

![image](https://user-images.githubusercontent.com/83372679/211778207-3ddbb4e0-70cc-4f14-969b-52963a57a5f6.png)
2.	Если в последующем окне возникнет ошибка, то нужно открыть порты на сервере с postgres

![image](https://user-images.githubusercontent.com/83372679/211778237-8f3d5ccf-525f-4b15-82a3-999c84e75584.png)
3.	Если далее возникнет ошибка, в которой содержится «pg_hba.conf», то надо перейти по следующей директории C:\Program Files\PostgreSQL\<version>\data\ и найти данный файл (номер версии может отличаться)

![image](https://user-images.githubusercontent.com/83372679/211778269-49c310e0-7dee-43ab-b8cd-7e84011c5b98.png)
4.	Ввести строчку, разрешающую доступ ко всем БД для всех пользователей с определенной подсети, метод шифрования md5
«host    all             all        10.0.0.0/8           md5»
10.0.0.0/8 означает, что все IP, которые начинаются с 10.Х.Х.Х и маской 255.Х.Х.Х смогут обратиться к данной БД PostgreSQL
5.	Перезагрузить службу PostgreSQL в службах 

![image](https://user-images.githubusercontent.com/83372679/211778301-2c722ec2-e540-4f91-9ca8-99fed48fc242.png)

![image](https://user-images.githubusercontent.com/83372679/211778318-83166f21-16b0-430f-940e-79c0b5e01ccc.png)
6.	Адрес сервера можно также ввести доменным именем или же его IP-адресом (машина centOS), кол-во соединений максимум может быть 32

![image](https://user-images.githubusercontent.com/83372679/211778358-6bc1b379-360c-47cc-be0c-2400b10ec587.png)
7.	Залогиниться под пользователем, в адрес сервера можно ввести как доменное имя, так и IP-адрес 

![image](https://user-images.githubusercontent.com/83372679/211778392-4005853d-5021-4981-9d86-76e7f5c39716.png)
